# Application
APP_NAME=KubeDB DBaaS Platform
APP_VERSION=1.0.0
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# Server
HOST=0.0.0.0
PORT=8000
WORKERS=4
RELOAD=false

# Security
SECRET_KEY=your-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
API_KEY_HEADER=X-API-Key

# Database (MongoDB for metadata)
MONGODB_URL=mongodb://localhost:27017/kubedb_dbaas
MONGODB_DATABASE=kubedb_dbaas
MONGODB_MAX_POOL_SIZE=100
MONGODB_MIN_POOL_SIZE=10

# Redis (for caching and rate limiting)
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=50

# Kubernetes
KUBECONFIG_PATH=/path/to/kubeconfig
K8S_NAMESPACE=default
K8S_IN_CLUSTER=false

# KubeDB
KUBEDB_ENABLED=true
KUBEDB_OPERATOR_NAMESPACE=kubedb

# HashiCorp Vault
VAULT_ENABLED=false
VAULT_ADDR=http://localhost:8200
VAULT_TOKEN=your-vault-token
VAULT_NAMESPACE=

# Monitoring
PROMETHEUS_ENABLED=true
PROMETHEUS_URL=http://prometheus-server:9090
PROMETHEUS_PORT=9090
JAEGER_ENABLED=false
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831

# Production-Grade Metrics Caching
# Multi-layer caching for lakhs of concurrent users
METRICS_CACHE_MEMORY_TTL=5        # L1 cache (in-memory) TTL in seconds
METRICS_CACHE_REDIS_TTL=15        # L2 cache (Redis) TTL in seconds
METRICS_RATE_LIMIT_PER_USER=100   # Max requests per minute per user
METRICS_RATE_LIMIT_PER_DB=1000    # Max requests per minute per database
CIRCUIT_BREAKER_THRESHOLD=5       # Failures before opening circuit
CIRCUIT_BREAKER_TIMEOUT=60        # Seconds to wait before retry

# Sentry
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.1

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# Multi-tenancy
MULTI_TENANT_ENABLED=true
DEFAULT_TENANT_QUOTA_CPU=10
DEFAULT_TENANT_QUOTA_MEMORY_GB=20
DEFAULT_TENANT_QUOTA_STORAGE_GB=100
DEFAULT_TENANT_MAX_DATABASES=10

# Backup & Restore
BACKUP_ENABLED=true
BACKUP_STORAGE_TYPE=s3
BACKUP_S3_BUCKET=kubedb-backups
BACKUP_S3_REGION=us-east-1
BACKUP_RETENTION_DAYS=30

# Background Workers (Single-Pod Mode)
# All workers run in the same process as API server
RECONCILE_INTERVAL=300              # Reconciliation runs every 5 minutes (drift detection)
RECONCILE_BATCH_SIZE=50             # Process 50 databases per batch
NUM_OPERATION_WORKERS=3             # 3 concurrent operation workers per pod
STATUS_SYNC_INTERVAL=30             # Status sync every 30 seconds

# CORS
CORS_ORIGINS=["http://localhost:3000"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["*"]
CORS_ALLOW_HEADERS=["*"]
